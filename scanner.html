<html>
    <head>

    </head>
    <body>
        <video id="video" autoplay>

        </video>
        <script language="javascript">
            const video = document.querySelector("#video");
            //Check if device has camera
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                const constrain = {
                    video : {
                        widht : {
                            min : 1280,
                            ideal : 1280,
                            max : 1280
                        },
                        height : {
                            min : 720,
                            ideal : 720,
                            max : 720
                        },
                        facingMode : {
                            exact: 'environment'
                        }
                    },
                    audio : false   
                }

                //start video stream
                navigator.mediaDevices.getUserMedia(constrain).then(stream => video.srcObject = stream);

                //Mendklarasi class barcode detector
                const barcodeDetector = new BarcodeDetector({ formats : ['qr_code'] });

                const deteksiKode = () => {
                    //Mulai mendeteksi qrcode
                    barcodeDetector.detect(video).then(codes => {
                        
                        if (codes.length === 0) return;
                        
                        for (const qrcode of codes) {
                            alert(qrcode);
                        }

                    })
                    .catch(err => {
                        alert(err);
                    });
                }

                setInterval(deteksiKode, 100);
            }
        </script>
    </body>
</html>